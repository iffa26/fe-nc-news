(this["webpackJsonpnc-news-iffa"]=this["webpackJsonpnc-news-iffa"]||[]).push([[0],{24:function(e,t,n){e.exports=n(54)},29:function(e,t,n){},30:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),o=n.n(c),l=(n(29),n(1)),i=n(2),u=n(4),s=n(3),m=n(5),p=(n(30),n(7)),h=function(){return r.a.createElement("h1",null,"Northcoders News")};function d(){return r.a.createElement("nav",null,r.a.createElement(p.a,{to:"/"},r.a.createElement("button",null,"Home")),r.a.createElement(p.a,{to:"/topics"},r.a.createElement("button",null,"Topics")),r.a.createElement(p.a,{to:"/articles"},r.a.createElement("button",null,"Articles")))}var f=n(8),E=n.n(f),g=function(e,t,n){return E.a.get("http://nc-news-iffa.herokuapp.com/api/articles",{params:{topic:e,sort_by:t,order:n}}).then((function(e){return e.data.articles}))},v=function(e){return E.a.get("http://nc-news-iffa.herokuapp.com/api/articles/".concat(e)).then((function(e){return e.data.article}))},b=function(e){return E.a.get("http://nc-news-iffa.herokuapp.com/api/articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))},y=function(){return E.a.get("http://nc-news-iffa.herokuapp.com/api/topics").then((function(e){return e.data.topics}))},j=function(e,t,n){return E.a.post("http://nc-news-iffa.herokuapp.com/api/articles/".concat(e,"/comments"),{username:n,body:t}).then((function(e){return e.data.comment}))},O=function(e,t){return E.a.patch("http://nc-news-iffa.herokuapp.com/api/articles/".concat(e),{inc_votes:t}).then((function(e){return e.data.article}))},k=function(e,t){return E.a.patch("http://nc-news-iffa.herokuapp.com/api/comments/".concat(e),{inc_votes:t}).then((function(e){return e.data.comment}))},C=function(e){return E.a.delete("http://nc-news-iffa.herokuapp.com/api/comments/".concat(e))},_=n(23),w=n(10),L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={newCommentInput:""},n.handleInput=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(w.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state.newCommentInput,a=n.props.userLoggedIn;n.props.addComment(t,a),n.setState({newCommentInput:""})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.newCommentInput,t=this.props.userLoggedIn;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"newCommentInput",onChange:this.handleInput,value:e}),r.a.createElement("button",{disabled:null===t},"post!"),!t&&r.a.createElement("p",null,"Login to comment and vote!"))}}]),t}(r.a.Component),I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={changeVotesBy:0},n.handleClick=function(e){var t=n.props,a=t.article_id,r=t.comment_id;a&&n.setState({changeVotesBy:e}),r&&n.setState({changeVotesBy:e}),n.updateVotes(e)},n.updateVotes=function(e){var t=n.props,a=t.article_id,r=t.comment_id;a&&O(a,e),r&&k(r,e)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.userLoggedIn;return r.a.createElement("p",null,"votes: ",this.props.votes+this.state.changeVotesBy,r.a.createElement("button",{onClick:function(){return e.handleClick(1)},disabled:this.state.changeVotesBy>0||null===t},"+"),r.a.createElement("button",{onClick:function(){return e.handleClick(-1)},disabled:this.state.changeVotesBy<0||null===t},"-"))}},{key:"componentDidUpdate",value:function(e,t){0!==t.changeVotesBy&&this.setState({changeVotesBy:0})}}]),t}(r.a.Component);function S(e){var t=e.comment_id,n=e.removeComment;return r.a.createElement("button",{onClick:function(){n(t)}},"delete this comment?")}function A(e){var t=e.comment,n=e.userLoggedIn,a=e.removeComment,c=e.deleteErr;return r.a.createElement("li",null,r.a.createElement("p",null,t.body),r.a.createElement("div",null,"@",t.author,r.a.createElement(I,{comment_id:t.comment_id,votes:t.votes,userLoggedIn:n})),r.a.createElement("p",null,t.created_at),n===t.author&&r.a.createElement(S,{comment_id:t.comment_id,removeComment:a,userLoggedIn:n}),c&&r.a.createElement("p",null,"error deleting comment, try again later"))}var B=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={comments:null,postErr:null,deleteErr:null},n.fetchCommentsByArticleId=function(){b(n.props.article_id).then((function(e){n.setState({comments:e})}))},n.addComment=function(e,t){var a=n.props.article_id;j(a,e,t).then((function(e){n.setState({comments:[e].concat(Object(_.a)(n.state.comments)),postErr:null})})).catch((function(e){n.setState({postErr:e})}))},n.removeComment=function(e){C(e).catch((function(e){n.setState({deleteErr:e})}));var t=n.state.comments.filter((function(t){return t.comment_id!==e}));n.setState({comments:t,deleteErr:null})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.comments,a=t.postErr,c=t.deleteErr,o=this.props.userLoggedIn;return n?r.a.createElement("section",null,"ArticleComments",r.a.createElement(L,{userLoggedIn:o,addComment:this.addComment}),a&&r.a.createElement("p",null,"Error posting comment, try again later"),r.a.createElement("ul",null,n.map((function(t){return r.a.createElement(A,{key:t.comment_id,comment:t,userLoggedIn:o,removeComment:e.removeComment,deleteErr:c})})))):r.a.createElement("section",null)}},{key:"componentDidMount",value:function(){this.fetchCommentsByArticleId()}}]),t}(r.a.Component);function V(e){var t=e.err.response,n=t.status,a=t.data;return r.a.createElement("section",null,"error!",r.a.createElement("p",null,"status:"),n," ",a.msg,r.a.createElement("p",null))}function D(){return r.a.createElement("section",null,r.a.createElement("p",null," Loading..."))}var M=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={article:null,err:null,isLoading:!0},n.fetchSingleArticle=function(){var e=n.props.article_id;v(e).then((function(e){n.setState({article:e,err:null})})).catch((function(e){n.setState({err:e})}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.article,n=e.err,a=this.props.userLoggedIn;return n?r.a.createElement(V,{err:n}):t?r.a.createElement("main",null,r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.body),r.a.createElement(I,{votes:t.votes,article_id:t.article_id,userLoggedIn:a}),r.a.createElement(B,{article_id:t.article_id,userLoggedIn:a})):r.a.createElement("main",null,r.a.createElement(D,null))}},{key:"componentDidMount",value:function(){this.fetchSingleArticle()}}]),t}(r.a.Component);function T(e){var t=e.article;return r.a.createElement("li",{key:t.article_id},r.a.createElement(p.a,{to:"/article/".concat(t.article_id)},r.a.createElement("h3",null,t.title)),r.a.createElement(p.a,{to:"/articles/topic/".concat(t.topic)},r.a.createElement("h4",null,t.topic)),r.a.createElement("h4",null," ",t.comment_count," comments"),r.a.createElement("h4",null," ",t.votes," votes"),r.a.createElement("h4",null," ",t.created_at," "))}function x(e){var t=e.sortArticles;return r.a.createElement("section",null,"Sort by:",r.a.createElement("button",{id:"comment_count",onClick:t},"comments"),r.a.createElement("button",{id:"created_at",onClick:t},"date"),r.a.createElement("button",{id:"votes",onClick:t},"votes"))}var H=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={articles:null,comment_count:{order:"desc"},votes:{order:"desc"},created_at:{order:"desc"},err:null},n.fetchArticles=function(){var e=n.props.topic_slug;g(e).then((function(e){n.setState({articles:e,err:null})})).catch((function(e){n.setState({err:e})}))},n.sortArticles=function(e){var t=e.target.id,a=n.state[t].order;g(null,t,a).then((function(e){var r,c="asc";"asc"===a&&(c="desc"),n.setState((r={articles:e},Object(w.a)(r,t,{order:c}),Object(w.a)(r,"err",null),r))})).catch((function(e){n.setState({err:e})}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.articles,n=e.err;return n?r.a.createElement(V,{err:n}):t?r.a.createElement("main",null,r.a.createElement("h2",null,"Articles List ",this.props.topic_slug),r.a.createElement(x,{sortArticles:this.sortArticles}),r.a.createElement("ul",null,this.state.articles.map((function(e){return r.a.createElement(T,{article:e,key:e.article_id})})))):r.a.createElement("main",null,r.a.createElement(D,null))}},{key:"componentDidMount",value:function(){this.fetchArticles()}}]),t}(r.a.Component),J=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={topics:null,isLoading:!0,err:null},n.fetchTopics=function(){y().then((function(e){n.setState({topics:e,isLoading:!1,err:null})})).catch((function(e){n.setState({err:e})}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.topics,n=e.err;return n?r.a.createElement(V,{err:n}):t?r.a.createElement("main",null,r.a.createElement("h2",null,"Topics List"),r.a.createElement("ul",null,this.state.topics.map((function(e){return r.a.createElement("li",{key:e.slug},r.a.createElement(p.a,{to:"/articles/topic/".concat(e.slug)},r.a.createElement("h3",null,e.slug)))})))):r.a.createElement("main",null,r.a.createElement(D,null))}},{key:"componentDidMount",value:function(){this.fetchTopics()}}]),t}(r.a.Component),N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={},n.handleClick=function(e){e.preventDefault(),n.props.loginLogout(e.target.value)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.userLoggedIn;return e?r.a.createElement("section",null,"Hello ",e,"!",r.a.createElement("button",{onClick:this.handleClick,value:null},"Logout?")):r.a.createElement("form",null,r.a.createElement("select",{name:"cars"},r.a.createElement("option",{value:"jessjelly"},"jessjelly")),r.a.createElement("button",{onClick:this.handleClick,value:"jessjelly"},"Login!"))}}]),t}(r.a.Component),W=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={userLoggedIn:"jessjelly"},n.loginLogout=function(e){e?n.setState({userLoggedIn:e}):n.setState({userLoggedIn:null})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.userLoggedIn;return r.a.createElement("div",null,r.a.createElement(h,null),r.a.createElement(d,null),r.a.createElement(N,{userLoggedIn:e,loginLogout:this.loginLogout}),r.a.createElement(p.b,null,r.a.createElement(H,{path:"/"}),r.a.createElement(H,{path:"/articles"}),r.a.createElement(M,{path:"/article/:article_id",userLoggedIn:e}),r.a.createElement(J,{path:"/topics"}),r.a.createElement(H,{path:"/articles/topic/:topic_slug"}),r.a.createElement(V,{default:!0})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.8d06fe52.chunk.js.map